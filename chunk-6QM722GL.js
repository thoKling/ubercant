import{c as b,d as g,g as l,h as y,i as a,q as x}from"./chunk-Y3AKL22N.js";import{$ as p,Ba as S,C as v,D as f,Ua as C,W as w,db as R,fa as o,g as h,j as c,nc as _,o as m,ya as d,z as u}from"./chunk-SLXIJTUR.js";var D=20,z=(()=>{class n{_ngZone=o(d);_platform=o(g);_document=o(_,{optional:!0});constructor(){}_scrolled=new c;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=D){return this._platform.isBrowser?new h(t=>{this._globalSubscription||this._addGlobalListener();let r=e>0?this._scrolled.pipe(f(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):m()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){let r=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(v(i=>!i||r.indexOf(i)>-1))}getAncestorScrollContainers(e){let t=[];return this.scrollContainers.forEach((r,i)=>{this._scrollableContainsElement(i,e)&&t.push(i)}),t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,t){let r=b(t),i=e.getElementRef().nativeElement;do if(r==i)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return u(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fe=(()=>{class n{elementRef=o(S);scrollDispatcher=o(z);ngZone=o(d);dir=o(x,{optional:!0});_destroyed=new c;_elementScrolled=new h(e=>this.ngZone.runOutsideAngular(()=>u(this.elementRef.nativeElement,"scroll").pipe(w(this._destroyed)).subscribe(e)));constructor(){}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let t=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=r?e.end:e.start),e.right==null&&(e.right=r?e.start:e.end),e.bottom!=null&&(e.top=t.scrollHeight-t.clientHeight-e.bottom),r&&a()!=l.NORMAL?(e.left!=null&&(e.right=t.scrollWidth-t.clientWidth-e.left),a()==l.INVERTED?e.left=e.right:a()==l.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=t.scrollWidth-t.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let t=this.elementRef.nativeElement;y()?t.scrollTo(e):(e.top!=null&&(t.scrollTop=e.top),e.left!=null&&(t.scrollLeft=e.left))}measureScrollOffset(e){let t="left",r="right",i=this.elementRef.nativeElement;if(e=="top")return i.scrollTop;if(e=="bottom")return i.scrollHeight-i.clientHeight-i.scrollTop;let s=this.dir&&this.dir.value=="rtl";return e=="start"?e=s?r:t:e=="end"&&(e=s?t:r),s&&a()==l.INVERTED?e==t?i.scrollWidth-i.clientWidth-i.scrollLeft:i.scrollLeft:s&&a()==l.NEGATED?e==t?i.scrollLeft+i.scrollWidth-i.clientWidth:-i.scrollLeft:e==t?i.scrollLeft:i.scrollWidth-i.clientWidth-i.scrollLeft}static \u0275fac=function(t){return new(t||n)};static \u0275dir=R({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return n})(),O=20,Be=(()=>{class n{_platform=o(g);_listeners;_viewportSize;_change=new c;_document=o(_,{optional:!0});constructor(){let e=o(d),t=o(C).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=i=>this._change.next(i);this._listeners=[t.listen("window","resize",r),t.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:t,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+t,height:r,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,t=this._getWindow(),r=e.documentElement,i=r.getBoundingClientRect(),s=-i.top||e.body.scrollTop||t.scrollY||r.scrollTop||0,k=-i.left||e.body.scrollLeft||t.scrollX||r.scrollLeft||0;return{top:s,left:k}}change(e=O){return e>0?this._change.pipe(f(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();export{z as a,Fe as b,Be as c};
