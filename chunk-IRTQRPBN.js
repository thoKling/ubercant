import{a as T,b as A}from"./chunk-6NFRY22T.js";import{b as L,c as M}from"./chunk-V6SFDBQH.js";import{s as w}from"./chunk-WMCDR566.js";import"./chunk-GITDR5EQ.js";import{Bb as x,Db as s,Eb as p,Ob as o,Pb as b,Qa as c,Qb as v,Sb as P,Ub as k,Vb as D,bb as g,fa as f,gb as h,na as d,nb as C,oa as _,uc as Q,vb as n,wb as r,xb as y,xc as S}from"./chunk-SLXIJTUR.js";var l=class{products$;cart=new Map;api;constructor(t){this.api=t,this.products$=this.api.getProducts()}get total(){return Array.from(this.cart.entries()).reduce((t,[e,i])=>t+i*e.price,0).toFixed(2)}increaseQuantity(t){this.cart.set(t,(this.cart.get(t)||0)+1)}decreaseQuantity(t){if(this.cart.has(t)){if(this.cart.get(t)===1){this.cart.delete(t);return}this.cart.set(t,this.cart.get(t)-1)}}getQuantity(t){return this.cart.get(t)||0}makeCommand(){return this.api.command.makeCommand({products:[...this.cart.entries()].map(([t,e])=>({productId:t.name,quantity:e}))})}};function $(a,t){if(a&1){let e=x();n(0,"mat-list-item")(1,"span",3),o(2),n(3,"button",4),s("click",function(){let m=d(e).$implicit,u=p();return _(u.decreaseQuantity(m))}),o(4,"-"),r(),n(5,"span"),o(6),r(),n(7,"button",5),s("click",function(){let m=d(e).$implicit,u=p();return _(u.increaseQuantity(m))}),o(8,"+"),r()()()}if(a&2){let e=t.$implicit,i=p();c(2),P("",e.name," - ",e.price,"\u20AC - ",e.description," "),c(4),b(i.getQuantity(e))}}var I=class a{api=f(w);shoppingList=new l(this.api);get products$(){return this.shoppingList.products$}increaseQuantity(t){this.shoppingList.increaseQuantity(t)}decreaseQuantity(t){this.shoppingList.decreaseQuantity(t)}getQuantity(t){return this.shoppingList.getQuantity(t)}getTotal(){return this.shoppingList.total}command(){this.shoppingList.makeCommand()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=g({type:a,selectors:[["app-commercant"]],decls:12,vars:4,consts:[["id","container"],[4,"ngFor","ngForOf"],["color","accent","mat-raised-button","",3,"click"],["matListItemTitle",""],["color","warn","mat-icon-button","",3,"click"],["color","primary","mat-icon-button","",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"h1"),o(2,"Produits disponibles"),r(),n(3,"mat-list"),h(4,$,9,4,"mat-list-item",1),k(5,"async"),r(),n(6,"span"),o(7),r(),y(8,"br")(9,"br"),n(10,"button",2),s("click",function(){return i.command()}),o(11," Passer commande"),r()()),e&2&&(c(4),C("ngForOf",D(5,2,i.products$)),c(3),v("Total: ",i.getTotal()," \u20AC"))},dependencies:[L,M,T,A,Q,S],styles:["#container[_ngcontent-%COMP%]{padding:30px}mat-list[_ngcontent-%COMP%]{background-color:#f0f0f0}"]})};export{I as CommercantComponent};
