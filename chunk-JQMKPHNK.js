import{a as T,b as A}from"./chunk-CGH5MJOF.js";import{b as w,c as L}from"./chunk-K3FBQIK3.js";import{s as M}from"./chunk-JTJOIS52.js";import"./chunk-4QWJVMND.js";import{Jb as o,Kb as v,La as c,Lb as b,Nb as P,Pb as k,Qb as D,Ya as g,ba as f,bb as h,ib as C,ja as d,ka as _,oc as Q,qb as n,rb as r,rc as S,sb as y,wb as x,yb as s,zb as p}from"./chunk-VF77OBZC.js";var l=class{products$;cart=new Map;api;constructor(t){this.api=t,this.products$=this.api.getProducts()}get total(){return Array.from(this.cart.entries()).reduce((t,[e,i])=>t+i*e.price,0).toFixed(2)}increaseQuantity(t){this.cart.set(t,(this.cart.get(t)||0)+1)}decreaseQuantity(t){if(this.cart.has(t)){if(this.cart.get(t)===1){this.cart.delete(t);return}this.cart.set(t,this.cart.get(t)-1)}}getQuantity(t){return this.cart.get(t)||0}makeCommand(){return this.api.command.makeCommand({products:[...this.cart.entries()].map(([t,e])=>({productId:t.name,quantity:e}))})}};function $(a,t){if(a&1){let e=x();n(0,"mat-list-item")(1,"span",3),o(2),n(3,"button",4),s("click",function(){let m=d(e).$implicit,u=p();return _(u.decreaseQuantity(m))}),o(4,"-"),r(),n(5,"span"),o(6),r(),n(7,"button",5),s("click",function(){let m=d(e).$implicit,u=p();return _(u.increaseQuantity(m))}),o(8,"+"),r()()()}if(a&2){let e=t.$implicit,i=p();c(2),P("",e.name," - ",e.price,"\u20AC - ",e.description," "),c(4),v(i.getQuantity(e))}}var I=class a{api=f(M);shoppingList=new l(this.api);get products$(){return this.shoppingList.products$}increaseQuantity(t){this.shoppingList.increaseQuantity(t)}decreaseQuantity(t){this.shoppingList.decreaseQuantity(t)}getQuantity(t){return this.shoppingList.getQuantity(t)}getTotal(){return this.shoppingList.total}command(){this.shoppingList.makeCommand()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=g({type:a,selectors:[["app-commercant"]],decls:11,vars:4,consts:[["id","container"],[4,"ngFor","ngForOf"],["color","accent","mat-raised-button","",3,"click"],["matListItemTitle",""],["color","warn","mat-icon-button","",3,"click"],["color","primary","mat-icon-button","",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"p"),o(2,"commercant works!"),r(),n(3,"mat-list"),h(4,$,9,4,"mat-list-item",1),k(5,"async"),r(),n(6,"span"),o(7),r(),y(8,"br"),n(9,"button",2),s("click",function(){return i.command()}),o(10," Passer commande"),r()()),e&2&&(c(4),C("ngForOf",D(5,2,i.products$)),c(3),b("Total: ",i.getTotal()," \u20AC"))},dependencies:[w,L,T,A,Q,S],styles:["#container[_ngcontent-%COMP%]{padding:30px}"]})};export{I as CommercantComponent};
