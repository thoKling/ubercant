import{a as R,b as O,c as A,d as V,e as H,f as L,g as q,h as B,i as N,j as F,k as G}from"./chunk-WFFPBT5X.js";import{a as j,c as z}from"./chunk-MBOHCOYU.js";import{i as Q}from"./chunk-X7BGX7B6.js";import{x as $}from"./chunk-WNA7TV27.js";import{$b as S,Bb as s,Jb as i,Jc as T,Kb as o,Lb as p,Lc as I,Mb as _,Mc as k,Nb as f,Pb as y,Rb as x,Sb as u,ac as a,bc as M,cb as c,cc as C,hc as D,ia as b,ic as P,jc as E,pb as w,ra as h,sa as g,ub as l}from"./chunk-XOM32O7N.js";var v=class{products$;cart=new Map;api;constructor(t){this.api=t,this.products$=this.api.getProducts()}get total(){return Array.from(this.cart.entries()).reduce((t,[n,r])=>t+r*n.price,0).toFixed(2)}increaseQuantity(t){this.cart.set(t,(this.cart.get(t)||0)+1)}decreaseQuantity(t){if(this.cart.has(t)){if(this.cart.get(t)===1){this.cart.delete(t);return}this.cart.set(t,this.cart.get(t)-1)}}getQuantity(t){return this.cart.get(t)||0}makeCommand(){return this.api.command.makeCommand({products:[...this.cart.entries()].map(([t,n])=>({productId:t.name,quantity:n}))})}};function K(e,t){e&1&&(i(0,"th",13),a(1," Name"),o())}function U(e,t){if(e&1&&(i(0,"td",14)(1,"div",15),p(2,"ik-image",16),a(3),o()()),e&2){let n=t.$implicit,r=u(2);c(2),s("path",r.getImgPath(n))("transformation",r.imgTransformation),c(),C(" ",n.name," ")}}function W(e,t){e&1&&(i(0,"th",13),a(1," Description"),o())}function X(e,t){if(e&1&&(i(0,"td",14),a(1),o()),e&2){let n=t.$implicit;c(),C(" ",n.description,"")}}function Y(e,t){e&1&&(i(0,"th",13),a(1," Price"),o())}function Z(e,t){if(e&1&&(i(0,"td",14),a(1),D(2,"currency"),o()),e&2){let n=t.$implicit;c(),C(" ",P(2,1,n.price),"")}}function tt(e,t){e&1&&(i(0,"th",13),a(1,"Quantit\xE9"),o())}function et(e,t){if(e&1){let n=y();i(0,"td",14)(1,"button",17),x("click",function(){let m=h(n).$implicit,d=u(2);return g(d.decreaseQuantity(m))}),a(2,"-"),o(),i(3,"span",18),a(4),o(),i(5,"button",17),x("click",function(){let m=h(n).$implicit,d=u(2);return g(d.increaseQuantity(m))}),a(6,"+"),o()()}if(e&2){let n=t.$implicit,r=u(2);c(4),M(r.getQuantity(n))}}function nt(e,t){e&1&&p(0,"tr",19)}function it(e,t){e&1&&p(0,"tr",20)}function ot(e,t){if(e&1&&(i(0,"div")(1,"table",4),_(2,5),l(3,K,2,0,"th",6)(4,U,4,3,"td",7),f(),_(5,8),l(6,W,2,0,"th",6)(7,X,2,1,"td",7),f(),_(8,9),l(9,Y,2,0,"th",6)(10,Z,3,3,"td",7),f(),_(11,10),l(12,tt,2,0,"th",6)(13,et,7,1,"td",7),f(),l(14,nt,1,0,"tr",11)(15,it,1,0,"tr",12),o()()),e&2){let n=u();c(),s("dataSource",n.products$),c(13),s("matHeaderRowDef",n.displayedColumns),c(),s("matRowDefColumns",n.displayedColumns)}}function at(e,t){e&1&&p(0,"mat-spinner")}var J=class e{imgTransformation=[{height:"100",width:"100"}];displayedColumns=["name","description","price","quantity"];api=b(Q);shoppingList=new v(this.api);get products$(){return this.shoppingList.products$}getImgPath(t){return t.imgPath??"/tata"}increaseQuantity(t){this.shoppingList.increaseQuantity(t)}decreaseQuantity(t){this.shoppingList.decreaseQuantity(t)}getQuantity(t){return this.shoppingList.getQuantity(t)}getTotal(){return this.shoppingList.total}command(){this.shoppingList.makeCommand()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=w({type:e,selectors:[["app-commercant"]],decls:14,vars:5,consts:[["noProducts",""],["id","container"],[4,"ngIf","ngIfElse"],["color","accent","mat-raised-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","price"],["matColumnDef","quantity"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"column"],[3,"path","transformation"],[3,"click"],[1,"quantity-text"],["mat-header-row",""],["mat-row",""]],template:function(n,r){if(n&1){let m=y();i(0,"div",1)(1,"h1"),a(2,"Produits disponibles"),o(),l(3,ot,16,3,"div",2),D(4,"async"),l(5,at,1,0,"ng-template",null,0,E),p(7,"br"),i(8,"span"),a(9),o(),p(10,"br")(11,"br"),i(12,"button",3),x("click",function(){return h(m),g(r.command())}),a(13," Passer commande"),o()()}if(n&2){let m,d=S(6);c(3),s("ngIf",(m=(m=P(4,3,r.products$))==null?null:m.length)!==null&&m!==void 0?m:!1)("ngIfElse",d),c(6),C("Total: ",r.getTotal()," \u20AC")}},dependencies:[$,I,k,z,j,L,O,V,H,N,q,G,F,B,R,T,A],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;color:#fff}#container[_ngcontent-%COMP%]{padding:2vw;background-color:#424242;height:100%}.column[_ngcontent-%COMP%]{padding:8px;display:flex;flex-direction:column}.mdc-data-table__cell[_ngcontent-%COMP%], .mdc-data-table__header-cell[_ngcontent-%COMP%]{padding:4px}.quantity-text[_ngcontent-%COMP%]{padding:8px}"]})};export{J as CommercantComponent};
