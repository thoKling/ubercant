import{b as wt,c as yt,e as bt,f as vt,g as kt,h as St,i as _t,j as It}from"./chunk-P6QFTWXH.js";import{c as xt}from"./chunk-MBOHCOYU.js";import{d as Ct,w as Tt,x as jt}from"./chunk-WNA7TV27.js";import{$ as Ge,C as ke,Ca as qe,Cc as se,D as Ne,Db as at,E as te,Eb as st,Fa as Qe,G as U,H as M,Hc as gt,Jb as X,K as Fe,Kb as H,L as We,La as et,Lb as ae,M as oe,O as Se,Oa as tt,Rb as ct,S as Ke,T as $e,Tb as lt,Ub as _e,V as Xe,Vb as ut,Xb as ht,Y as ie,Yb as dt,Z as He,_ as O,a as ye,aa as Ve,ac as G,b as be,bc as pt,ca as A,cb as ot,eb as it,f as w,fa as $,gb as nt,ha as _,ia as C,kc as mt,l as ve,la as Je,m as Ze,ma as Ye,mc as ft,n as q,p as F,pb as re,q as T,r as W,rb as rt,u as K,w as Q,xa as ne,z as ee,za as Be}from"./chunk-XOM32O7N.js";function j(i,e){var t={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(t[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(o=Object.getOwnPropertySymbols(i);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(i,o[n])&&(t[o[n]]=i[o[n]])}return t}var z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Re(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Me(i,e){return i(e={exports:{}},e.exports),e.exports}var E=Me(function(i,e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function o(){var n=this;this.locked=new Map,this.addToLocked=function(r,a){var l=n.locked.get(r);l===void 0?a===void 0?n.locked.set(r,[]):n.locked.set(r,[a]):a!==void 0&&(l.unshift(a),n.locked.set(r,l))},this.isLocked=function(r){return n.locked.has(r)},this.lock=function(r){return new Promise(function(a,l){n.isLocked(r)?n.addToLocked(r,a):(n.addToLocked(r),a())})},this.unlock=function(r){var a=n.locked.get(r);if(a!==void 0&&a.length!==0){var l=a.pop();n.locked.set(r,a),l!==void 0&&setTimeout(l,0)}else n.locked.delete(r)}}return o.getInstance=function(){return o.instance===void 0&&(o.instance=new o),o.instance},o}();e.default=function(){return t.getInstance()}});Re(E);var qt=Re(Me(function(i,e){var t=z&&z.__awaiter||function(s,c,u,h){return new(u||(u=Promise))(function(p,y){function g(b){try{k(h.next(b))}catch(f){y(f)}}function v(b){try{k(h.throw(b))}catch(f){y(f)}}function k(b){b.done?p(b.value):new u(function(f){f(b.value)}).then(g,v)}k((h=h.apply(s,c||[])).next())})},o=z&&z.__generator||function(s,c){var u,h,p,y,g={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return y={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function v(k){return function(b){return function(f){if(u)throw new TypeError("Generator is already executing.");for(;g;)try{if(u=1,h&&(p=2&f[0]?h.return:f[0]?h.throw||((p=h.return)&&p.call(h),0):h.next)&&!(p=p.call(h,f[1])).done)return p;switch(h=0,p&&(f=[2&f[0],p.value]),f[0]){case 0:case 1:p=f;break;case 4:return g.label++,{value:f[1],done:!1};case 5:g.label++,h=f[1],f=[0];continue;case 7:f=g.ops.pop(),g.trys.pop();continue;default:if(p=g.trys,!((p=p.length>0&&p[p.length-1])||f[0]!==6&&f[0]!==2)){g=0;continue}if(f[0]===3&&(!p||f[1]>p[0]&&f[1]<p[3])){g.label=f[1];break}if(f[0]===6&&g.label<p[1]){g.label=p[1],p=f;break}if(p&&g.label<p[2]){g.label=p[2],g.ops.push(f);break}p[2]&&g.ops.pop(),g.trys.pop();continue}f=c.call(s,g)}catch(I){f=[6,I],h=0}finally{u=p=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([k,b])}}},n=z;Object.defineProperty(e,"__esModule",{value:!0});var r="browser-tabs-lock-key",a={key:function(s){return t(n,void 0,void 0,function(){return o(this,function(c){throw new Error("Unsupported")})})},getItem:function(s){return t(n,void 0,void 0,function(){return o(this,function(c){throw new Error("Unsupported")})})},clear:function(){return t(n,void 0,void 0,function(){return o(this,function(s){return[2,window.localStorage.clear()]})})},removeItem:function(s){return t(n,void 0,void 0,function(){return o(this,function(c){throw new Error("Unsupported")})})},setItem:function(s,c){return t(n,void 0,void 0,function(){return o(this,function(u){throw new Error("Unsupported")})})},keySync:function(s){return window.localStorage.key(s)},getItemSync:function(s){return window.localStorage.getItem(s)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(s){return window.localStorage.removeItem(s)},setItemSync:function(s,c){return window.localStorage.setItem(s,c)}};function l(s){return new Promise(function(c){return setTimeout(c,s)})}function d(s){for(var c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",u="",h=0;h<s;h++)u+=c[Math.floor(Math.random()*c.length)];return u}var m=function(){function s(c){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+d(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=c,s.waiters===void 0&&(s.waiters=[])}return s.prototype.acquireLock=function(c,u){return u===void 0&&(u=5e3),t(this,void 0,void 0,function(){var h,p,y,g,v,k,b;return o(this,function(f){switch(f.label){case 0:h=Date.now()+d(4),p=Date.now()+u,y=r+"-"+c,g=this.storageHandler===void 0?a:this.storageHandler,f.label=1;case 1:return Date.now()<p?[4,l(30)]:[3,8];case 2:return f.sent(),g.getItemSync(y)!==null?[3,5]:(v=this.id+"-"+c+"-"+h,[4,l(Math.floor(25*Math.random()))]);case 3:return f.sent(),g.setItemSync(y,JSON.stringify({id:this.id,iat:h,timeoutKey:v,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,l(30)];case 4:return f.sent(),(k=g.getItemSync(y))!==null&&(b=JSON.parse(k)).id===this.id&&b.iat===h?(this.acquiredIatSet.add(h),this.refreshLockWhileAcquired(y,h),[2,!0]):[3,7];case 5:return s.lockCorrector(this.storageHandler===void 0?a:this.storageHandler),[4,this.waitForSomethingToChange(p)];case 6:f.sent(),f.label=7;case 7:return h=Date.now()+d(4),[3,1];case 8:return[2,!1]}})})},s.prototype.refreshLockWhileAcquired=function(c,u){return t(this,void 0,void 0,function(){var h=this;return o(this,function(p){return setTimeout(function(){return t(h,void 0,void 0,function(){var y,g,v;return o(this,function(k){switch(k.label){case 0:return[4,E.default().lock(u)];case 1:return k.sent(),this.acquiredIatSet.has(u)?(y=this.storageHandler===void 0?a:this.storageHandler,(g=y.getItemSync(c))===null?(E.default().unlock(u),[2]):((v=JSON.parse(g)).timeRefreshed=Date.now(),y.setItemSync(c,JSON.stringify(v)),E.default().unlock(u),this.refreshLockWhileAcquired(c,u),[2])):(E.default().unlock(u),[2])}})})},1e3),[2]})})},s.prototype.waitForSomethingToChange=function(c){return t(this,void 0,void 0,function(){return o(this,function(u){switch(u.label){case 0:return[4,new Promise(function(h){var p=!1,y=Date.now(),g=!1;function v(){if(g||(window.removeEventListener("storage",v),s.removeFromWaiting(v),clearTimeout(k),g=!0),!p){p=!0;var b=50-(Date.now()-y);b>0?setTimeout(h,b):h(null)}}window.addEventListener("storage",v),s.addToWaiting(v);var k=setTimeout(v,Math.max(0,c-Date.now()))})];case 1:return u.sent(),[2]}})})},s.addToWaiting=function(c){this.removeFromWaiting(c),s.waiters!==void 0&&s.waiters.push(c)},s.removeFromWaiting=function(c){s.waiters!==void 0&&(s.waiters=s.waiters.filter(function(u){return u!==c}))},s.notifyWaiters=function(){s.waiters!==void 0&&s.waiters.slice().forEach(function(c){return c()})},s.prototype.releaseLock=function(c){return t(this,void 0,void 0,function(){return o(this,function(u){switch(u.label){case 0:return[4,this.releaseLock__private__(c)];case 1:return[2,u.sent()]}})})},s.prototype.releaseLock__private__=function(c){return t(this,void 0,void 0,function(){var u,h,p,y;return o(this,function(g){switch(g.label){case 0:return u=this.storageHandler===void 0?a:this.storageHandler,h=r+"-"+c,(p=u.getItemSync(h))===null?[2]:(y=JSON.parse(p)).id!==this.id?[3,2]:[4,E.default().lock(y.iat)];case 1:g.sent(),this.acquiredIatSet.delete(y.iat),u.removeItemSync(h),E.default().unlock(y.iat),s.notifyWaiters(),g.label=2;case 2:return[2]}})})},s.lockCorrector=function(c){for(var u=Date.now()-5e3,h=c,p=[],y=0;;){var g=h.keySync(y);if(g===null)break;p.push(g),y++}for(var v=!1,k=0;k<p.length;k++){var b=p[k];if(b.includes(r)){var f=h.getItemSync(b);if(f!==null){var I=JSON.parse(f);(I.timeRefreshed===void 0&&I.timeAcquired<u||I.timeRefreshed!==void 0&&I.timeRefreshed<u)&&(h.removeItemSync(b),v=!0)}}}v&&s.notifyWaiters()},s.waiters=void 0,s}();e.default=m})),Qt={timeoutInSeconds:60},Lt={name:"auth0-spa-js",version:"2.1.3"},Ut=()=>Date.now(),S=class i extends Error{constructor(e,t){super(t),this.error=e,this.error_description=t,Object.setPrototypeOf(this,i.prototype)}static fromPayload({error:e,error_description:t}){return new i(e,t)}},ue=class i extends S{constructor(e,t,o,n=null){super(e,t),this.state=o,this.appState=n,Object.setPrototypeOf(this,i.prototype)}},N=class i extends S{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,i.prototype)}},he=class i extends N{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,i.prototype)}},de=class i extends S{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,i.prototype)}},pe=class i extends S{constructor(e,t,o){super(e,t),this.mfa_token=o,Object.setPrototypeOf(this,i.prototype)}},J=class i extends S{constructor(e,t){super("missing_refresh_token",`Missing Refresh Token (audience: '${Ot(e,["default"])}', scope: '${Ot(t)}')`),this.audience=e,this.scope=t,Object.setPrototypeOf(this,i.prototype)}};function Ot(i,e=[]){return i&&!e.includes(i)?i:""}var le=()=>window.crypto,Ie=()=>{let i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",e="";return Array.from(le().getRandomValues(new Uint8Array(43))).forEach(t=>e+=i[t%i.length]),e},At=i=>btoa(i),xe=i=>{var{clientId:e}=i,t=j(i,["clientId"]);return new URLSearchParams((o=>Object.keys(o).filter(n=>o[n]!==void 0).reduce((n,r)=>Object.assign(Object.assign({},n),{[r]:o[r]}),{}))(Object.assign({client_id:e},t))).toString()},Pt=i=>(e=>decodeURIComponent(atob(e).split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join("")))(i.replace(/_/g,"/").replace(/-/g,"+")),eo=(i,e)=>w(void 0,null,function*(){let t=yield fetch(i,e);return{ok:t.ok,json:yield t.json()}}),to=(i,e,t)=>w(void 0,null,function*(){let o=new AbortController,n;return e.signal=o.signal,Promise.race([eo(i,e),new Promise((r,a)=>{n=setTimeout(()=>{o.abort(),a(new Error("Timeout when executing 'fetch'"))},t)})]).finally(()=>{clearTimeout(n)})}),oo=(i,e,t,o,n,r,a)=>w(void 0,null,function*(){return l={auth:{audience:e,scope:t},timeout:n,fetchUrl:i,fetchOptions:o,useFormData:a},d=r,new Promise(function(m,s){let c=new MessageChannel;c.port1.onmessage=function(u){u.data.error?s(new Error(u.data.error)):m(u.data),c.port1.close()},d.postMessage(l,[c.port2])});var l,d}),io=(i,e,t,o,n,r,a=1e4)=>w(void 0,null,function*(){return n?oo(i,e,t,o,a,n,r):to(i,o,a)});function no(i,e){return w(this,null,function*(){var{baseUrl:t,timeout:o,audience:n,scope:r,auth0Client:a,useFormData:l}=i,d=j(i,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);let m=l?xe(d):JSON.stringify(d);return yield function(s,c,u,h,p,y,g){return w(this,null,function*(){let v,k=null;for(let R=0;R<3;R++)try{v=yield io(s,u,h,p,y,g,c),k=null;break}catch(Bt){k=Bt}if(k)throw k;let b=v.json,{error:f,error_description:I}=b,B=j(b,["error","error_description"]),{ok:x}=v;if(!x){let R=I||`HTTP error. Unable to fetch ${s}`;throw f==="mfa_required"?new pe(f,R,B.mfa_token):f==="missing_refresh_token"?new J(u,h):new S(f||"request_error",R)}return B})}(`${t}/oauth/token`,o,n||"default",r,{method:"POST",body:m,headers:{"Content-Type":l?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(a||Lt))}},e,l)})}var ce=(...i)=>{return(e=i.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(e))).join(" ");var e},P=class i{constructor(e,t="@@auth0spajs@@",o){this.prefix=t,this.suffix=o,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){let[t,o,n,r]=e.split("::");return new i({clientId:o,scope:r,audience:n},t)}static fromCacheEntry(e){let{scope:t,audience:o,client_id:n}=e;return new i({scope:t,audience:o,clientId:n})}},me=class{set(e,t){localStorage.setItem(e,JSON.stringify(t))}get(e){let t=window.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch{return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter(e=>e.startsWith("@@auth0spajs@@"))}},Y=class{constructor(){this.enclosedCache=function(){let e={};return{set(t,o){e[t]=o},get(t){let o=e[t];if(o)return o},remove(t){delete e[t]},allKeys:()=>Object.keys(e)}}()}},Oe=class{constructor(e,t,o){this.cache=e,this.keyManifest=t,this.nowProvider=o||Ut}setIdToken(e,t,o){return w(this,null,function*(){var n;let r=this.getIdTokenCacheKey(e);yield this.cache.set(r,{id_token:t,decodedToken:o}),yield(n=this.keyManifest)===null||n===void 0?void 0:n.add(r)})}getIdToken(e){return w(this,null,function*(){let t=yield this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!t&&e.scope&&e.audience){let o=yield this.get(e);return!o||!o.id_token||!o.decodedToken?void 0:{id_token:o.id_token,decodedToken:o.decodedToken}}if(t)return{id_token:t.id_token,decodedToken:t.decodedToken}})}get(e,t=0){return w(this,null,function*(){var o;let n=yield this.cache.get(e.toKey());if(!n){let l=yield this.getCacheKeys();if(!l)return;let d=this.matchExistingCacheKey(e,l);d&&(n=yield this.cache.get(d))}if(!n)return;let r=yield this.nowProvider(),a=Math.floor(r/1e3);return n.expiresAt-t<a?n.body.refresh_token?(n.body={refresh_token:n.body.refresh_token},yield this.cache.set(e.toKey(),n),n.body):(yield this.cache.remove(e.toKey()),void(yield(o=this.keyManifest)===null||o===void 0?void 0:o.remove(e.toKey()))):n.body})}set(e){return w(this,null,function*(){var t;let o=new P({clientId:e.client_id,scope:e.scope,audience:e.audience}),n=yield this.wrapCacheEntry(e);yield this.cache.set(o.toKey(),n),yield(t=this.keyManifest)===null||t===void 0?void 0:t.add(o.toKey())})}clear(e){return w(this,null,function*(){var t;let o=yield this.getCacheKeys();o&&(yield o.filter(n=>!e||n.includes(e)).reduce((n,r)=>w(this,null,function*(){yield n,yield this.cache.remove(r)}),Promise.resolve()),yield(t=this.keyManifest)===null||t===void 0?void 0:t.clear())})}wrapCacheEntry(e){return w(this,null,function*(){let t=yield this.nowProvider();return{body:e,expiresAt:Math.floor(t/1e3)+e.expires_in}})}getCacheKeys(){return w(this,null,function*(){var e;return this.keyManifest?(e=yield this.keyManifest.get())===null||e===void 0?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0})}getIdTokenCacheKey(e){return new P({clientId:e},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(e,t){return t.filter(o=>{var n;let r=P.fromKey(o),a=new Set(r.scope&&r.scope.split(" ")),l=((n=e.scope)===null||n===void 0?void 0:n.split(" "))||[],d=r.scope&&l.reduce((m,s)=>m&&a.has(s),!0);return r.prefix==="@@auth0spajs@@"&&r.clientId===e.clientId&&r.audience===e.audience&&d})[0]}},Ae=class{constructor(e,t,o){this.storage=e,this.clientId=t,this.cookieDomain=o,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}},V=i=>typeof i=="number",ro=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],ao=i=>{if(!i.id_token)throw new Error("ID token is required but missing");let e=(r=>{let a=r.split("."),[l,d,m]=a;if(a.length!==3||!l||!d||!m)throw new Error("ID token could not be decoded");let s=JSON.parse(Pt(d)),c={__raw:r},u={};return Object.keys(s).forEach(h=>{c[h]=s[h],ro.includes(h)||(u[h]=s[h])}),{encoded:{header:l,payload:d,signature:m},header:JSON.parse(Pt(l)),claims:c,user:u}})(i.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==i.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${i.iss}", found "${e.claims.iss}"`);if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(e.header.alg!=="RS256")throw new Error(`Signature algorithm of "${e.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!e.claims.aud||typeof e.claims.aud!="string"&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(i.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${i.aud}" but was not one of "${e.claims.aud.join(", ")}"`);if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==i.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${i.aud}", found "${e.claims.azp}"`)}}else if(e.claims.aud!==i.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${i.aud}" but found "${e.claims.aud}"`);if(i.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==i.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${i.nonce}", found "${e.claims.nonce}"`)}if(i.max_age&&!V(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(e.claims.exp==null||!V(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!V(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");let t=i.leeway||60,o=new Date(i.now||Date.now()),n=new Date(0);if(n.setUTCSeconds(e.claims.exp+t),o>n)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${o}) is after expiration time (${n})`);if(e.claims.nbf!=null&&V(e.claims.nbf)){let r=new Date(0);if(r.setUTCSeconds(e.claims.nbf-t),o<r)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${o}) is before ${r}`)}if(e.claims.auth_time!=null&&V(e.claims.auth_time)){let r=new Date(0);if(r.setUTCSeconds(parseInt(e.claims.auth_time)+i.max_age+t),o>r)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${o}) is after last auth at ${r}`)}if(i.organization){let r=i.organization.trim();if(r.startsWith("org_")){let a=r;if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(a!==e.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${a}", found "${e.claims.org_id}"`)}else{let a=r.toLowerCase();if(!e.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(a!==e.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${a}", found "${e.claims.org_name}"`)}}return e},D=Me(function(i,e){var t=z&&z.__assign||function(){return t=Object.assign||function(d){for(var m,s=1,c=arguments.length;s<c;s++)for(var u in m=arguments[s])Object.prototype.hasOwnProperty.call(m,u)&&(d[u]=m[u]);return d},t.apply(this,arguments)};function o(d,m){if(!m)return"";var s="; "+d;return m===!0?s:s+"="+m}function n(d,m,s){return encodeURIComponent(d).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(m).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(c){if(typeof c.expires=="number"){var u=new Date;u.setMilliseconds(u.getMilliseconds()+864e5*c.expires),c.expires=u}return o("Expires",c.expires?c.expires.toUTCString():"")+o("Domain",c.domain)+o("Path",c.path)+o("Secure",c.secure)+o("SameSite",c.sameSite)}(s)}function r(d){for(var m={},s=d?d.split("; "):[],c=/(%[\dA-F]{2})+/gi,u=0;u<s.length;u++){var h=s[u].split("="),p=h.slice(1).join("=");p.charAt(0)==='"'&&(p=p.slice(1,-1));try{m[h[0].replace(c,decodeURIComponent)]=p.replace(c,decodeURIComponent)}catch{}}return m}function a(){return r(document.cookie)}function l(d,m,s){document.cookie=n(d,m,t({path:"/"},s))}e.__esModule=!0,e.encode=n,e.parse=r,e.getAll=a,e.get=function(d){return a()[d]},e.set=l,e.remove=function(d,m){l(d,"",t(t({},m),{expires:-1}))}});Re(D),D.encode,D.parse,D.getAll;var so=D.get,Zt=D.set,Nt=D.remove,Z={get(i){let e=so(i);if(e!==void 0)return JSON.parse(e)},save(i,e,t){let o={};window.location.protocol==="https:"&&(o={secure:!0,sameSite:"none"}),t?.daysUntilExpire&&(o.expires=t.daysUntilExpire),t?.cookieDomain&&(o.domain=t.cookieDomain),Zt(i,JSON.stringify(e),o)},remove(i,e){let t={};e?.cookieDomain&&(t.domain=e.cookieDomain),Nt(i,t)}},co={get(i){return Z.get(i)||Z.get(`_legacy_${i}`)},save(i,e,t){let o={};window.location.protocol==="https:"&&(o={secure:!0}),t?.daysUntilExpire&&(o.expires=t.daysUntilExpire),t?.cookieDomain&&(o.domain=t.cookieDomain),Zt(`_legacy_${i}`,JSON.stringify(e),o),Z.save(i,e,t)},remove(i,e){let t={};e?.cookieDomain&&(t.domain=e.cookieDomain),Nt(i,t),Z.remove(i,e),Z.remove(`_legacy_${i}`,e)}},lo={get(i){if(typeof sessionStorage>"u")return;let e=sessionStorage.getItem(i);return e!=null?JSON.parse(e):void 0},save(i,e){sessionStorage.setItem(i,JSON.stringify(e))},remove(i){sessionStorage.removeItem(i)}};function uo(i,e,t){var o=e===void 0?null:e,n=function(d,m){var s=atob(d);if(m){for(var c=new Uint8Array(s.length),u=0,h=s.length;u<h;++u)c[u]=s.charCodeAt(u);return String.fromCharCode.apply(null,new Uint16Array(c.buffer))}return s}(i,t!==void 0&&t),r=n.indexOf(`
`,10)+1,a=n.substring(r)+(o?"//# sourceMappingURL="+o:""),l=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(l)}var Rt,Mt,Et,Ce,ho=(Rt="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",Mt=null,Et=!1,function(i){return Ce=Ce||uo(Rt,Mt,Et),new Worker(Ce,i)}),Te={},Pe=class{constructor(e,t){this.cache=e,this.clientId=t,this.manifestKey=this.createManifestKeyFrom(this.clientId)}add(e){return w(this,null,function*(){var t;let o=new Set(((t=yield this.cache.get(this.manifestKey))===null||t===void 0?void 0:t.keys)||[]);o.add(e),yield this.cache.set(this.manifestKey,{keys:[...o]})})}remove(e){return w(this,null,function*(){let t=yield this.cache.get(this.manifestKey);if(t){let o=new Set(t.keys);return o.delete(e),o.size>0?yield this.cache.set(this.manifestKey,{keys:[...o]}):yield this.cache.remove(this.manifestKey)}})}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}},po={memory:()=>new Y().enclosedCache,localstorage:()=>new me},zt=i=>po[i],Dt=i=>{let{openUrl:e,onRedirect:t}=i,o=j(i,["openUrl","onRedirect"]);return Object.assign(Object.assign({},o),{openUrl:e===!1||e?e:t})},je=new qt,fe=class{constructor(e){let t,o;if(this.userCache=new Y().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=()=>w(this,null,function*(){yield je.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}),this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),typeof window<"u"&&(()=>{if(!le())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(le().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)o=e.cache;else{if(t=e.cacheLocation||"memory",!zt(t))throw new Error(`Invalid cache location "${t}"`);o=zt(t)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=e.legacySameSiteCookie===!1?Z:co,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(a=>`auth0.${a}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;let n=e.useCookiesForTransactions?this.cookieStorage:lo;var r;this.scope=ce("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new Ae(n,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||Ut,this.cacheManager=new Oe(o,o.allKeys?void 0:new Pe(o,this.options.clientId),this.nowProvider),this.domainUrl=(r=this.options.domain,/^https?:\/\//.test(r)?r:`https://${r}`),this.tokenIssuer=((a,l)=>a?a.startsWith("https://")?a:`https://${a}/`:`${l}/`)(this.options.issuer,this.domainUrl),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&t==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new ho)}_url(e){let t=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||Lt)));return`${this.domainUrl}${e}&auth0Client=${t}`}_authorizeUrl(e){return this._url(`/authorize?${xe(e)}`)}_verifyIdToken(e,t,o){return w(this,null,function*(){let n=yield this.nowProvider();return ao({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:t,organization:o,leeway:this.options.leeway,max_age:(r=this.options.authorizationParams.max_age,typeof r!="string"?r:parseInt(r,10)||void 0),now:n});var r})}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}_prepareAuthorizeUrl(e,t,o){return w(this,null,function*(){let n=At(Ie()),r=At(Ie()),a=Ie(),l=(s=>{let c=new Uint8Array(s);return(u=>{let h={"+":"-","/":"_","=":""};return u.replace(/[+/=]/g,p=>h[p])})(window.btoa(String.fromCharCode(...Array.from(c))))})(yield(s=>w(this,null,function*(){return yield le().subtle.digest({name:"SHA-256"},new TextEncoder().encode(s))}))(a)),d=((s,c,u,h,p,y,g,v)=>Object.assign(Object.assign(Object.assign({client_id:s.clientId},s.authorizationParams),u),{scope:ce(c,u.scope),response_type:"code",response_mode:v||"query",state:h,nonce:p,redirect_uri:g||s.authorizationParams.redirect_uri,code_challenge:y,code_challenge_method:"S256"}))(this.options,this.scope,e,n,r,l,e.redirect_uri||this.options.authorizationParams.redirect_uri||o,t?.response_mode),m=this._authorizeUrl(d);return{nonce:r,code_verifier:a,scope:d.scope,audience:d.audience||"default",redirect_uri:d.redirect_uri,state:n,url:m}})}loginWithPopup(e,t){return w(this,null,function*(){var o;if(e=e||{},!(t=t||{}).popup&&(t.popup=(l=>{let d=window.screenX+(window.innerWidth-400)/2,m=window.screenY+(window.innerHeight-600)/2;return window.open(l,"auth0:authorize:popup",`left=${d},top=${m},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!t.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");let n=yield this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:"web_message"},window.location.origin);t.popup.location.href=n.url;let r=yield(l=>new Promise((d,m)=>{let s,c=setInterval(()=>{l.popup&&l.popup.closed&&(clearInterval(c),clearTimeout(u),window.removeEventListener("message",s,!1),m(new de(l.popup)))},1e3),u=setTimeout(()=>{clearInterval(c),m(new he(l.popup)),window.removeEventListener("message",s,!1)},1e3*(l.timeoutInSeconds||60));s=function(h){if(h.data&&h.data.type==="authorization_response"){if(clearTimeout(u),clearInterval(c),window.removeEventListener("message",s,!1),l.popup.close(),h.data.response.error)return m(S.fromPayload(h.data.response));d(h.data.response)}},window.addEventListener("message",s)}))(Object.assign(Object.assign({},t),{timeoutInSeconds:t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(n.state!==r.state)throw new S("state_mismatch","Invalid state");let a=((o=e.authorizationParams)===null||o===void 0?void 0:o.organization)||this.options.authorizationParams.organization;yield this._requestToken({audience:n.audience,scope:n.scope,code_verifier:n.code_verifier,grant_type:"authorization_code",code:r.code,redirect_uri:n.redirect_uri},{nonceIn:n.nonce,organization:a})})}getUser(){return w(this,null,function*(){var e;let t=yield this._getIdTokenFromCache();return(e=t?.decodedToken)===null||e===void 0?void 0:e.user})}getIdTokenClaims(){return w(this,null,function*(){var e;let t=yield this._getIdTokenFromCache();return(e=t?.decodedToken)===null||e===void 0?void 0:e.claims})}loginWithRedirect(){return w(this,arguments,function*(e={}){var t;let o=Dt(e),{openUrl:n,fragment:r,appState:a}=o,l=j(o,["openUrl","fragment","appState"]),d=((t=l.authorizationParams)===null||t===void 0?void 0:t.organization)||this.options.authorizationParams.organization,m=yield this._prepareAuthorizeUrl(l.authorizationParams||{}),{url:s}=m,c=j(m,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},c),{appState:a}),d&&{organization:d}));let u=r?`${s}#${r}`:s;n?yield n(u):window.location.assign(u)})}handleRedirectCallback(){return w(this,arguments,function*(e=window.location.href){let t=e.split("?").slice(1);if(t.length===0)throw new Error("There are no query params available for parsing.");let{state:o,code:n,error:r,error_description:a}=(c=>{c.indexOf("#")>-1&&(c=c.substring(0,c.indexOf("#")));let u=new URLSearchParams(c);return{state:u.get("state"),code:u.get("code")||void 0,error:u.get("error")||void 0,error_description:u.get("error_description")||void 0}})(t.join("")),l=this.transactionManager.get();if(!l)throw new S("missing_transaction","Invalid state");if(this.transactionManager.remove(),r)throw new ue(r,a||r,o,l.appState);if(!l.code_verifier||l.state&&l.state!==o)throw new S("state_mismatch","Invalid state");let d=l.organization,m=l.nonce,s=l.redirect_uri;return yield this._requestToken(Object.assign({audience:l.audience,scope:l.scope,code_verifier:l.code_verifier,grant_type:"authorization_code",code:n},s?{redirect_uri:s}:{}),{nonceIn:m,organization:d}),{appState:l.appState}})}checkSession(e){return w(this,null,function*(){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{yield this.getTokenSilently(e)}catch{}})}getTokenSilently(){return w(this,arguments,function*(e={}){var t;let o=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:ce(this.scope,(t=e.authorizationParams)===null||t===void 0?void 0:t.scope)})}),n=yield((r,a)=>{let l=Te[a];return l||(l=r().finally(()=>{delete Te[a],l=null}),Te[a]=l),l})(()=>this._getTokenSilently(o),`${this.options.clientId}::${o.authorizationParams.audience}::${o.authorizationParams.scope}`);return e.detailedResponse?n:n?.access_token})}_getTokenSilently(e){return w(this,null,function*(){let{cacheMode:t}=e,o=j(e,["cacheMode"]);if(t!=="off"){let n=yield this._getEntryFromCache({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId});if(n)return n}if(t!=="cache-only"){if(!(yield((n,r=3)=>w(this,null,function*(){for(let a=0;a<r;a++)if(yield n())return!0;return!1}))(()=>je.acquireLock("auth0.lock.getTokenSilently",5e3),10)))throw new N;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),t!=="off"){let m=yield this._getEntryFromCache({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId});if(m)return m}let n=this.options.useRefreshTokens?yield this._getTokenUsingRefreshToken(o):yield this._getTokenFromIFrame(o),{id_token:r,access_token:a,oauthTokenScope:l,expires_in:d}=n;return Object.assign(Object.assign({id_token:r,access_token:a},l?{scope:l}:null),{expires_in:d})}finally{yield je.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}})}getTokenWithPopup(){return w(this,arguments,function*(e={},t={}){var o;let n=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:ce(this.scope,(o=e.authorizationParams)===null||o===void 0?void 0:o.scope)})});return t=Object.assign(Object.assign({},Qt),t),yield this.loginWithPopup(n,t),(yield this.cacheManager.get(new P({scope:n.authorizationParams.scope,audience:n.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token})}isAuthenticated(){return w(this,null,function*(){return!!(yield this.getUser())})}_buildLogoutUrl(e){e.clientId!==null?e.clientId=e.clientId||this.options.clientId:delete e.clientId;let t=e.logoutParams||{},{federated:o}=t,n=j(t,["federated"]),r=o?"&federated":"";return this._url(`/v2/logout?${xe(Object.assign({clientId:e.clientId},n))}`)+r}logout(){return w(this,arguments,function*(e={}){let t=Dt(e),{openUrl:o}=t,n=j(t,["openUrl"]);e.clientId===null?yield this.cacheManager.clear():yield this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");let r=this._buildLogoutUrl(n);o?yield o(r):o!==!1&&window.location.assign(r)})}_getTokenFromIFrame(e){return w(this,null,function*(){let t=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),o=this.cookieStorage.get(this.orgHintCookieName);o&&!t.organization&&(t.organization=o);let{url:n,state:r,nonce:a,code_verifier:l,redirect_uri:d,scope:m,audience:s}=yield this._prepareAuthorizeUrl(t,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new S("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");let c=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,u=yield((p,y,g=60)=>new Promise((v,k)=>{let b=window.document.createElement("iframe");b.setAttribute("width","0"),b.setAttribute("height","0"),b.style.display="none";let f=()=>{window.document.body.contains(b)&&(window.document.body.removeChild(b),window.removeEventListener("message",I,!1))},I,B=setTimeout(()=>{k(new N),f()},1e3*g);I=function(x){if(x.origin!=y||!x.data||x.data.type!=="authorization_response")return;let R=x.source;R&&R.close(),x.data.response.error?k(S.fromPayload(x.data.response)):v(x.data.response),clearTimeout(B),window.removeEventListener("message",I,!1),setTimeout(f,2e3)},window.addEventListener("message",I,!1),window.document.body.appendChild(b),b.setAttribute("src",p)}))(n,this.domainUrl,c);if(r!==u.state)throw new S("state_mismatch","Invalid state");let h=yield this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:l,code:u.code,grant_type:"authorization_code",redirect_uri:d,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:a,organization:t.organization});return Object.assign(Object.assign({},h),{scope:m,oauthTokenScope:h.scope,audience:s})}catch(c){throw c.error==="login_required"&&this.logout({openUrl:!1}),c}})}_getTokenUsingRefreshToken(e){return w(this,null,function*(){let t=yield this.cacheManager.get(new P({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(t&&t.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return yield this._getTokenFromIFrame(e);throw new J(e.authorizationParams.audience||"default",e.authorizationParams.scope)}let o=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,n=typeof e.timeoutInSeconds=="number"?1e3*e.timeoutInSeconds:null;try{let r=yield this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:t&&t.refresh_token,redirect_uri:o}),n&&{timeout:n}));return Object.assign(Object.assign({},r),{scope:e.authorizationParams.scope,oauthTokenScope:r.scope,audience:e.authorizationParams.audience||"default"})}catch(r){if((r.message.indexOf("Missing Refresh Token")>-1||r.message&&r.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return yield this._getTokenFromIFrame(e);throw r}})}_saveEntryInCache(e){return w(this,null,function*(){let{id_token:t,decodedToken:o}=e,n=j(e,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:t,decodedToken:o}),yield this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),yield this.cacheManager.set(n)})}_getIdTokenFromCache(){return w(this,null,function*(){let e=this.options.authorizationParams.audience||"default",t=yield this.cacheManager.getIdToken(new P({clientId:this.options.clientId,audience:e,scope:this.scope})),o=this.userCache.get("@@user@@");return t&&t.id_token===o?.id_token?o:(this.userCache.set("@@user@@",t),t)})}_getEntryFromCache(n){return w(this,arguments,function*({scope:e,audience:t,clientId:o}){let r=yield this.cacheManager.get(new P({scope:e,audience:t,clientId:o}),60);if(r&&r.access_token){let{access_token:a,oauthTokenScope:l,expires_in:d}=r,m=yield this._getIdTokenFromCache();return m&&Object.assign(Object.assign({id_token:m.id_token,access_token:a},l?{scope:l}:null),{expires_in:d})}})}_requestToken(e,t){return w(this,null,function*(){let{nonceIn:o,organization:n}=t||{},r=yield no(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},e),this.worker),a=yield this._verifyIdToken(r.id_token,o,n);return yield this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},r),{decodedToken:a,scope:e.scope,audience:e.audience||"default"}),r.scope?{oauthTokenScope:r.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(n||a.claims.org_id),Object.assign(Object.assign({},r),{decodedToken:a})})}};var Ft={name:"@auth0/auth0-angular",version:"2.2.3"},Ee=class{static createClient(e){let t=e.get();if(!t)throw new Error("Configuration must be specified either through AuthModule.forRoot or through AuthClientConfig.set");return new fe(be(ye({},t),{auth0Client:{name:Ft.name,version:Ft.version,env:{"angular/core":mt.full}}}))}},ge=new $("auth0.client");function Wt(i){return typeof i!="string"}var Kt=new $("auth0-angular.config"),De=(()=>{class i{constructor(t){t&&this.set(t)}set(t){this.config=t}get(){return this.config}}return i.\u0275fac=function(t){return new(t||i)(_(Kt,8))},i.\u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),go=(()=>{class i{constructor(t,o){this.location=t;try{this.router=o.get(St)}catch{}}navigateByUrl(t){if(this.router){this.router.navigateByUrl(t);return}this.location.replaceState(t)}}return i.\u0275fac=function(t){return new(t||i)(_(gt),_(ne))},i.\u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$t=(()=>{class i{constructor(t){this.auth0Client=t,this.isLoadingSubject$=new Ze(!0),this.refresh$=new ve,this.accessToken$=new q(1),this.errorSubject$=new q(1),this.isLoading$=this.isLoadingSubject$.asObservable(),this.accessTokenTrigger$=this.accessToken$.pipe($e((o,n)=>({previous:o.current,current:n}),{current:null,previous:null}),te(({previous:o,current:n})=>o!==n)),this.isAuthenticatedTrigger$=this.isLoading$.pipe(te(o=>!o),oe(),ie(()=>Ne(ee(()=>this.auth0Client.isAuthenticated()),this.accessTokenTrigger$.pipe(Q(()=>this.auth0Client.isAuthenticated())),this.refresh$.pipe(Q(()=>this.auth0Client.isAuthenticated()))))),this.isAuthenticated$=this.isAuthenticatedTrigger$.pipe(oe(),Xe(1)),this.user$=this.isAuthenticatedTrigger$.pipe(M(o=>o?this.auth0Client.getUser():T(null)),oe()),this.idTokenClaims$=this.isAuthenticatedTrigger$.pipe(M(o=>o?this.auth0Client.getIdTokenClaims():T(null))),this.error$=this.errorSubject$.asObservable()}setIsLoading(t){this.isLoadingSubject$.next(t)}refresh(){this.refresh$.next()}setAccessToken(t){this.accessToken$.next(t)}setError(t){this.errorSubject$.next(t)}}return i.\u0275fac=function(t){return new(t||i)(_(ge))},i.\u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),L=(()=>{class i{constructor(t,o,n,r){this.auth0Client=t,this.configFactory=o,this.navigator=n,this.authState=r,this.appStateSubject$=new q(1),this.ngUnsubscribe$=new ve,this.isLoading$=this.authState.isLoading$,this.isAuthenticated$=this.authState.isAuthenticated$,this.user$=this.authState.user$,this.idTokenClaims$=this.authState.idTokenClaims$,this.error$=this.authState.error$,this.appState$=this.appStateSubject$.asObservable();let a=l=>ke(()=>l,this.handleRedirectCallback(),ee(()=>this.auth0Client.checkSession()));this.shouldHandleCallback().pipe(ie(l=>a(l).pipe(U(d=>{let m=this.configFactory.get();return this.navigator.navigateByUrl(m.errorPath||"/"),this.authState.setError(d),T(void 0)}))),O(()=>{this.authState.setIsLoading(!1)}),He(this.ngUnsubscribe$)).subscribe()}ngOnDestroy(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}loginWithRedirect(t){return F(this.auth0Client.loginWithRedirect(t))}loginWithPopup(t,o){return F(this.auth0Client.loginWithPopup(t,o).then(()=>{this.authState.refresh()}))}logout(t){return F(this.auth0Client.logout(t).then(()=>{(t?.openUrl===!1||t?.openUrl)&&this.authState.refresh()}))}getAccessTokenSilently(t={}){return T(this.auth0Client).pipe(M(o=>t.detailedResponse===!0?o.getTokenSilently(be(ye({},t),{detailedResponse:!0})):o.getTokenSilently(t)),O(o=>{o&&this.authState.setAccessToken(typeof o=="string"?o:o.access_token)}),U(o=>(this.authState.setError(o),this.authState.refresh(),W(o))))}getAccessTokenWithPopup(t){return T(this.auth0Client).pipe(M(o=>o.getTokenWithPopup(t)),O(o=>{o&&this.authState.setAccessToken(o)}),U(o=>(this.authState.setError(o),this.authState.refresh(),W(o))))}handleRedirectCallback(t){return ee(()=>this.auth0Client.handleRedirectCallback(t)).pipe(Ge(this.authState.isLoading$),O(([o,n])=>{n||this.authState.refresh();let r=o?.appState,a=r?.target??"/";r&&this.appStateSubject$.next(r),this.navigator.navigateByUrl(a)}),K(([o])=>o))}shouldHandleCallback(){return T(location.search).pipe(K(t=>{let o=new URLSearchParams(t);return(o.has("code")||o.has("error"))&&o.has("state")&&!this.configFactory.get().skipRedirectCallback}))}}return i.\u0275fac=function(t){return new(t||i)(_(ge),_(De),_(go),_($t))},i.\u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),wo=(()=>{class i{constructor(t){this.auth=t}canLoad(t,o){return this.auth.isAuthenticated$.pipe(Fe(1))}canActivate(t,o){return this.redirectIfUnauthenticated(o)}canActivateChild(t,o){return this.redirectIfUnauthenticated(o)}redirectIfUnauthenticated(t){return this.auth.isAuthenticated$.pipe(O(o=>{o||this.auth.loginWithRedirect({appState:{target:t.url}})}))}}return i.\u0275fac=function(t){return new(t||i)(_(L))},i.\u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var yo=i=>e=>e.pipe(Q(t=>i.pipe(Se(),We(t)))),bo=(()=>{class i{constructor(t,o,n,r){this.configFactory=t,this.auth0Client=o,this.authState=n,this.authService=r}intercept(t,o){let n=this.configFactory.get();if(!n.httpInterceptor?.allowedList)return o.handle(t);let r=this.authService.isLoading$.pipe(te(a=>!a));return this.findMatchingRoute(t,n.httpInterceptor).pipe(M(a=>ke(()=>a!==null,T(a).pipe(yo(r),Ke("tokenOptions"),M(l=>this.getAccessTokenSilently(l).pipe(U(d=>this.allowAnonymous(a,d)?T(""):(this.authState.setError(d),W(d))))),ie(l=>{let d=l?t.clone({headers:t.headers.set("Authorization",`Bearer ${l}`)}):t;return o.handle(d)})),o.handle(t))))}getAccessTokenSilently(t){return T(this.auth0Client).pipe(M(o=>o.getTokenSilently(t)),O(o=>this.authState.setAccessToken(o)),U(o=>(this.authState.refresh(),W(o))))}stripQueryFrom(t){return t.indexOf("?")>-1&&(t=t.substr(0,t.indexOf("?"))),t.indexOf("#")>-1&&(t=t.substr(0,t.indexOf("#"))),t}canAttachToken(t,o){let n=r=>{if(!r)return!1;let a=this.stripQueryFrom(o.url);return r===a?!0:r.indexOf("*")===r.length-1&&o.url.startsWith(r.substr(0,r.length-1))};return Wt(t)?t.httpMethod&&t.httpMethod!==o.method?!1:(!t.uri&&!t.uriMatcher&&console.warn("Either a uri or uriMatcher is required when configuring the HTTP interceptor."),t.uriMatcher?t.uriMatcher(o.url):n(t.uri)):n(t)}findMatchingRoute(t,o){return F(o.allowedList).pipe(Se(n=>this.canAttachToken(n,t),null))}allowAnonymous(t,o){return!!t&&Wt(t)&&!!t.allowAnonymous&&["login_required","consent_required","missing_refresh_token"].includes(o.error)}}return i.\u0275fac=function(t){return new(t||i)(_(De),_(ge),_($t),_(L))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();function Xt(i){return[L,bo,wo,{provide:Kt,useValue:i},{provide:ge,useFactory:Ee.createClient,deps:[De]}]}var Ht=(i,e)=>{let t=C(L);return console.log("Auth guard"),t.isAuthenticated$.pipe(O(o=>{console.log("Isloggedin ? ",o),o||t.loginWithRedirect({appState:{target:e.url}})}))};var Gt=[{path:"",canActivate:[Ht],children:[{path:"caterer",loadChildren:()=>import("./chunk-JSD7RVLB.js").then(i=>i.CatererModule)},{path:"commercant",loadComponent:()=>import("./chunk-KTWQS36J.js").then(i=>i.CommercantComponent)}]}];var vo="@",ko=(()=>{class i{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=C(ne);loadingSchedulerFn=C(So,{optional:!0});_engine;constructor(t,o,n,r,a){this.doc=t,this.delegate=o,this.zone=n,this.animationType=r,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-PSYMSW5L.js").then(n=>n),o;return this.loadingSchedulerFn?o=this.loadingSchedulerFn(t):o=t(),o.catch(n=>{throw new Ve(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:r})=>{this._engine=n(this.animationType,this.doc);let a=new r(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(t,o){let n=this.delegate.createRenderer(t,o);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let r=new Le(n);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(t,o);r.use(l),this.scheduler??=this.injector.get(Be,null,{optional:!0}),this.scheduler?.notify(11)}).catch(a=>{r.use(n)}),r}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(o){it()};static \u0275prov=A({token:i,factory:i.\u0275fac})}return i})(),Le=class{delegate;replay=[];\u0275type=1;constructor(e){this.delegate=e}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,o,n){this.delegate.insertBefore(e,t,o,n)}removeChild(e,t,o){this.delegate.removeChild(e,t,o)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,o,n){this.delegate.setAttribute(e,t,o,n)}removeAttribute(e,t,o){this.delegate.removeAttribute(e,t,o)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,o,n){this.delegate.setStyle(e,t,o,n)}removeStyle(e,t,o){this.delegate.removeStyle(e,t,o)}setProperty(e,t,o){this.shouldReplay(t)&&this.replay.push(n=>n.setProperty(e,t,o)),this.delegate.setProperty(e,t,o)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,o){return this.shouldReplay(t)&&this.replay.push(n=>n.listen(e,t,o)),this.delegate.listen(e,t,o)}shouldReplay(e){return this.replay!==null&&e.startsWith(vo)}},So=new $("");function Vt(i="animations"){return tt("NgAsyncAnimations"),Je([{provide:nt,useFactory:(e,t,o)=>new ko(e,t,o,i),deps:[se,wt,qe]},{provide:et,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Jt={providers:[ft({eventCoalescing:!0}),It(Gt),vt(bt()),Vt(),Xt({domain:"dev-sponge.eu.auth0.com",clientId:"gntW11hcV1SHrtIvLrLtCILQPAhEU9gA",authorizationParams:{redirect_uri:window.location.origin+Tt.clientContextPath}}),Ye(xt.forRoot({urlEndpoint:"https://ik.imagekit.io/4w3h1m1ulv",publicKey:"public_ieZ9IOwccViITXr0m44St8GpIhg="}))]};var _o=["*",[["mat-toolbar-row"]]],Io=["*","mat-toolbar-row"],Ue=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275dir=rt({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return i})(),Yt=(()=>{class i{_elementRef=C(Qe);_platform=C(Ct);_document=C(se);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=re({type:i,selectors:[["mat-toolbar"]],contentQueries:function(o,n,r){if(o&1&&ut(r,Ue,5),o&2){let a;ht(a=dt())&&(n._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(o,n){o&2&&(st(n.color?"mat-"+n.color:""),at("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",n._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:Io,decls:2,vars:0,template:function(o,n){o&1&&(lt(_o),_e(0),_e(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}"],encapsulation:2,changeDetection:0})}return i})();var we=class i{title="ubercant";authService=C(L);username$=this.authService.user$.pipe(K(e=>(console.log("user",e),e?.name)));logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=re({type:i,selectors:[["app-root"]],decls:13,vars:1,consts:[["color","primary"],[1,"littleSpacer"],["mat-button","","routerLink","/caterer"],["mat-button","","routerLink","/commercant"],[1,"spacer"],["mat-raised-button","",3,"click"]],template:function(t,o){t&1&&(X(0,"mat-toolbar",0)(1,"mat-toolbar-row")(2,"span"),G(3),H(),ae(4,"span",1),X(5,"button",2),G(6,"Caterer"),H(),X(7,"button",3),G(8,"Comm"),H(),ae(9,"span",4),X(10,"button",5),ct("click",function(){return o.logout()}),G(11,"Logout"),H()()(),ae(12,"router-outlet")),t&2&&(ot(3),pt(o.title))},dependencies:[kt,_t,Ue,Yt,jt],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}.littleSpacer[_ngcontent-%COMP%]{width:2vh}"]})};yt(we,Jt).catch(i=>console.error(i));
